<% is_mine = message.user_id == current_user.id %>

<div
  id="<%= dom_id(message) %>"
  class="flex mb-2 <%= is_mine ? 'justify-end' : 'justify-start' %>"
>
  <div class="max-w-[70%]">
    <div class="
      px-4 py-2 rounded-2xl
      <%= is_mine ? 'bg-gray-700 text-white rounded-br-sm' : 'bg-gray-800 text-white rounded-bl-sm' %>
    ">
      <%= simple_format(message.content) %>
    </div>
    <div class="flex justify-between ">
      <div class="text-[11px] text-gray-400 mt-1 mx-3 <%= is_mine ? 'text-right' : 'text-left' %>">
        <%= message.user&.name || "Sistema" %> -
        <%= l(message.created_at, format: :short) %>
      </div>

      <% if is_mine %>
        <div class="flex justify-end mt-1">
          <%= button_to chat_message_path(message.chat, message),
            method: :delete,
            data: { turbo_confirm: "Tem certeza?" },
            class: "text-red-400 text-s hover:text-red-300" do %>
            ğŸ—‘ï¸
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
</div>
